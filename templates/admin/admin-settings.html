<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Admin | Settings</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Bootstrap 5 -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

  <!-- Main theme -->
  <link rel="stylesheet" href="/static/main.css">
  <link rel="stylesheet" href="{{ url_for('static', filename='admin/view_feedback.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='admin/admin-settings.css') }}">
</head>
<body>

  {% include 'components/admin_navbar.html' %}

  <div class="d-flex" id="wrapper">
    {% include 'components/sidebar_admin.html' %}

    <div id="main" class="page">

      <!-- Homepage Content Settings -->
      <h2 class="mb-4 text-primary">Homepage Content Settings</h2>

      <div class="card shadow border-0 mb-4">
        <div class="card-body">
          <form action="{{ url_for('admin_settings') }}" method="POST" enctype="multipart/form-data" id="homepageForm">
            <div class="form-group mb-3">
              <label for="heading">Heading text</label>
              <input type="text" class="form-control form-control-lg" id="heading" name="heading"
                     value="{{ settings.heading_text or '' }}" required>
            </div>

            <div class="form-group mb-3">
              <label for="subheading">Subheading text</label>
              <input type="text" class="form-control form-control-lg" id="subheading" name="subheading"
                     value="{{ settings.subheading_text or '' }}" required>
            </div>

            <div class="form-group mb-3">
              <label for="image">Background image</label>
              <input type="file" class="form-control" id="image" name="image" accept="image/*">
              {% if settings.background_image %}
                <small class="text-muted d-block mt-2">Current: {{ settings.background_image }}</small>
              {% endif %}
            </div>

            <button type="submit" class="btn btn-success btn-lg">Save changes</button>
          </form>
        </div>
      </div>

      <!-- Live preview -->
      <div class="card shadow border-0 mb-4">
        <div class="card-header bg-dark text-white">Live preview</div>
        <div class="card-body">
          <div class="hero-preview" id="heroPreview"
               style="background-image: linear-gradient(rgba(0,0,0,0.35), rgba(0,0,0,0.25)),
                      url('{{ url_for('static', filename=settings.background_image) if settings and settings.background_image else url_for('static', filename='images/ev-hero.jpg') }}');">
            <div class="hero-overlay">
              <h3 id="previewHeading">{{ settings.heading_text or 'Heading goes here' }}</h3>
              <h1 id="previewSubheading">{{ settings.subheading_text or 'Subheading goes here' }}</h1>
            </div>
          </div>
          <small class="text-muted d-block mt-2">Preview updates as you type or select a new image.</small>
        </div>
      </div>

      <!-- Change Password -->
      <h2 class="mb-4 text-primary">Security Settings</h2>

      <div class="card shadow border-0 mb-4">
        <div class="card-header bg-primary text-white">Change Password</div>
        <div class="card-body">
          <form action="{{ url_for('admin_settings') }}" method="POST" id="passwordForm">
            <div class="form-group mb-3">
              <label for="currentPassword">Current Password</label>
              <input type="password" class="form-control" id="currentPassword" name="currentPassword" required>
            </div>

            <div class="form-group mb-3">
              <label for="newPassword">New Password</label>
              <input type="password" class="form-control" id="newPassword" name="newPassword" required>
            </div>

            <div class="form-group mb-3">
              <label for="confirmPassword">Confirm New Password</label>
              <input type="password" class="form-control" id="confirmPassword" name="confirmPassword" required>
            </div>

            <button type="submit" class="btn btn-success btn-lg">Update Password</button>
          </form>
        </div>
      </div>

    </div>
  </div>

  {% include 'components/footer.html' %}

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script src="/static/admin/admin-settings.js"></script>
</body>
</html>
